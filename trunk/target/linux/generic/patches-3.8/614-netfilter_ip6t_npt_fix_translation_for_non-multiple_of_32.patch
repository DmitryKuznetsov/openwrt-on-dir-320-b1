Index: linux-3.8.12/net/ipv6/netfilter/ip6t_NPT.c
===================================================================
--- linux-3.8.12.orig/net/ipv6/netfilter/ip6t_NPT.c	2013-05-08 07:33:25.000000000 +0400
+++ linux-3.8.12/net/ipv6/netfilter/ip6t_NPT.c	2013-06-29 12:57:54.276162651 +0400
@@ -57,7 +57,7 @@
 		if (pfx_len - i >= 32)
 			mask = 0;
 		else
-			mask = htonl(~((1 << (pfx_len - i)) - 1));
+			mask = htonl((1 << (i - pfx_len + 32)) - 1);
 
 		idx = i / 32;
 		addr->s6_addr32[idx] &= mask;
